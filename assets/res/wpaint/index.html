<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scaleable=no" />

  <title>Morpheus Drawing</title>

  <style>
    body,
    html {
      margin: 0px;
      overflow: hidden;
    }
  </style>

  <script src="./lib/jquery.min.js"></script>

  <!-- jQuery UI -->
  <script src="./lib/jquery.ui.core.1.10.3.min.js"></script>
  <script src="./lib/jquery.ui.widget.1.10.3.min.js"></script>
  <script src="./lib/jquery.ui.mouse.1.10.3.min.js"></script>
  <script src="./lib/jquery.ui.draggable.1.10.3.min.js"></script>

  <!-- wColorPicker -->
  <link rel="stylesheet" type="text/css" href="./lib/wColorPicker.min.css" />
  <script src="./lib/wColorPicker.min.js"></script>

  <!-- wPaint -->
  <link rel="stylesheet" type="text/css" href="./lib/wPaint.min.css" />
  <link rel="stylesheet" type="text/css" href="./style.css" />
  <!-- <script  src="../src/wPaint.utils.js"></script> -->
  <script src="./lib/wPaint.min.js"></script>

  <!-- wPaint main -->
  <script src="./plugins/main/src/fillArea.min.js"></script>
  <script src="./plugins/main/src/wPaint.menu.main.js"></script>

  <!-- wPaint text -->
  <script src="./plugins/text/src/wPaint.menu.text.js"></script>

  <!-- wPaint shapes -->
  <script src="./plugins/shapes/src/shapes.min.js"></script>
  <script src="./plugins/shapes/src/wPaint.menu.main.shapes.js"></script>

  <!-- wPaint file -->
  <!-- <script  src="./plugins/file/src/wPaint.menu.main.file.js"></script> -->
  <script src="./plugins/custom/wpaint.custom.js"></script>


</head>

<body>
  <div id="wPaint" style="position:relative; width:200px; height:200px; background:#CACACA;"></div>

</body>
<script src="../www/js/mcore.min.js"></script>
<script>
  M.onReady(() => {


    var imagePath = M.data.param('imagePath')

    $(window).on('resize',function () {
      $('#wPaint').css({
        width: $(window).width(),
        height: $(window).height()
      }).wPaint('resize');
    })

    // init size based on browser dimensions
    $(window).resize();

    $.extend($.fn.wPaint.defaults, {
      saveImg: (b64) => {
        // 저장버튼 클릭 시
        M.data.global(M.drawing._WPAINT_PARAMKEY, b64)
        M.page.back()
      },
      cancel: () => {
        M.page.back()
      }
    });


    // set test image
    // get from tapping enter below
    $('#wPaint').wPaint({
      path: './',
      bg: '#fff',
      image: imagePath || ''
    });

  });

</script>

</html>